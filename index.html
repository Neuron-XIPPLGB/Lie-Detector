<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NEURON - XI PPLG B | Pulse Sensor Lie Detector</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</head>
<body class="bg-gray-950 text-gray-100 font-sans">

  <header class="min-h-screen flex items-center justify-center text-center px-6 bg-gradient-to-br from-cyan-500/10 to-purple-500/10">
    <div class="max-w-3xl">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        ESP32 Pulse Sensor Lie Detector
      </h1>
      <p class="text-gray-300 mb-8">
        Analisis detak jantung (BPM) untuk mendeteksi respons stres.
      </p>
      <a href="#project-details"
         class="inline-block px-6 py-3 bg-cyan-500 text-gray-900 font-semibold rounded-lg hover:bg-cyan-400 transition">
        Jelajahi Proyek
      </a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6">

    <section id="project-details" class="py-20">
      <h2 class="text-3xl font-bold mb-6">Detail Proyek</h2>
      <p class="text-gray-300 mb-8">
        Proyek ini menggunakan <span class="text-cyan-400 font-semibold">Heart Pulse Sensor</span>
        untuk mengukur <span class="font-semibold">BPM (Beats Per Minute)</span>.
        Perubahan BPM digunakan sebagai indikator kondisi psikologis pengguna.
      </p>

      <div class="grid md:grid-cols-2 gap-8">
        <ul class="space-y-3 text-gray-300">
          <li>✔ ESP32</li>
          <li>✔ Heart Pulse Sensor</li>
          <li>✔ Aplikasi Blynk</li>
          <li>✔ Kabel Jumper</li>
        </ul>

    <div class="mt-6 md:mt-0 h-48 w-full flex items-center justify-center bg-gray-900 rounded-lg shadow-lg overflow-hidden">
    <img src="images/arduino-diagram.png" 
        alt="Diagram Rangkaian Pulse Sensor"
        class="w-full h-full object-contain">
    </div>

    <section id="data-visualization" class="py-20">
      <h2 class="text-3xl font-bold mb-6">Visualisasi BPM</h2>

      <div class="bg-gray-900 rounded-xl p-6 h-96">
        <canvas id="lieDetectorChart"></canvas>
      </div>

      <p id="bpmStatus" class="mt-4 text-lg font-semibold text-gray-400">
        Status: Menunggu
      </p>

      <div class="mt-6 bg-gray-900 rounded-xl p-5">
        <h3 class="text-xl font-semibold mb-4 text-cyan-400">
          Klasifikasi Detak Jantung (BPM)
        </h3>

        <ul class="space-y-2 text-gray-300">
          <li class="flex items-center gap-3">
            <span class="w-3 h-3 rounded-full bg-gray-400"></span>
            <span><strong>0 BPM</strong> → Menunggu (tidak ada detak terdeteksi)</span>
          </li>

          <li class="flex items-center gap-3">
            <span class="w-3 h-3 rounded-full bg-green-400"></span>
            <span><strong>&lt; 90 BPM</strong> → Tenang</span>
          </li>

          <li class="flex items-center gap-3">
            <span class="w-3 h-3 rounded-full bg-yellow-400"></span>
            <span><strong>90 – 120 BPM</strong> → Tegang</span>
          </li>

          <li class="flex items-center gap-3">
            <span class="w-3 h-3 rounded-full bg-red-500"></span>
            <span><strong>&gt; 120 BPM</strong> → Bohong (indikasi stres tinggi)</span>
          </li>
        </ul>
      </div>

    <div class="mt-6 flex flex-wrap gap-4">
    <button id="simulateTruth"
        class="px-4 py-2 rounded bg-green-500 text-gray-900 font-medium hover:bg-green-400 transition">
        Simulasikan Tenang
    </button>

    <button id="simulateLie"
        class="px-4 py-2 rounded bg-red-500 text-gray-900 font-medium hover:bg-red-400 transition">
        Simulasikan Bohong
    </button>

    <button id="resetChart"
        class="px-4 py-2 rounded bg-gray-600 text-gray-100 font-medium hover:bg-gray-500 transition">
        Reset
    </button>
    </div>
    </section>

    <section id="code" class="py-20">
      <h2 class="text-3xl font-bold mb-6">Kode Arduino</h2>

      <pre class="bg-gray-900 rounded-xl p-6 text-sm text-green-400 overflow-x-auto">
<code>
// ======================================
//   IDENTITAS TEMPLATE BLYNK
// ======================================
#define BLYNK_TEMPLATE_ID "YOUR ID"
#define BLYNK_TEMPLATE_NAME "LIE DETECTOR"
#define BLYNK_DEVICE_NAME "ESP32_Pulse"
#define BLYNK_AUTH_TOKEN "YOUR TOKEN"

// ======================================
//   LIBRARY
// ======================================
#include &lt;WiFi.h&gt;
#include &lt;WiFiClient.h&gt;
#include &lt;BlynkSimpleEsp32.h&gt;

<span id="dots" class="text-gray-400">...</span>
<span id="more" class="hidden">

// KONFIGURASI WIFI
char ssid[] = "YOUR SSID";
char pass[] = "YOUR PASSWORD WI-FI";

// KONFIGURASI SENSOR
const int PulseSensorPin = 34;

int sensorValue = 0;
int BPM = 0;
unsigned long lastBeat = 0;
bool beatDetected = false;
int lastSensorValue = 0;
unsigned long lastSendTime = 0;

BlynkTimer timer;

// FUNGSI UNTUK MEMBACA & MENGIRIM DATA
void sendData() {
  sensorValue = analogRead(PulseSensorPin);

  if(sensorValue>600 && lastSensorValue<=600){
    unsigned long currentTime = millis();
    if(currentTime - lastBeat > 600){
      BPM = 60000/(currentTime - lastBeat);
      lastBeat = currentTime;
      beatDetected = true;
    }
  }

  if(millis()-lastBeat>9000){
    BPM=0;
    beatDetected=false;
  }

  lastSensorValue = sensorValue;

  if(millis()-lastSendTime>=1000){
    Blynk.virtualWrite(V0,sensorValue);
    Blynk.virtualWrite(V1,BPM);

    if(BPM==0) Blynk.virtualWrite(V2,"Menunggu...");
    else if(BPM<90) Blynk.virtualWrite(V2,"Tenang");
    else if(BPM<=120) Blynk.virtualWrite(V2,"Tegang");
    else Blynk.virtualWrite(V2,"Bohong");

    Serial.print("Raw: "); Serial.print(sensorValue);
    Serial.print(" | BPM: "); Serial.println(BPM);

    lastSendTime = millis();
  }
}

void setup(){
  Serial.begin(115200);
  pinMode(PulseSensorPin,INPUT);
  Blynk.begin(BLYNK_AUTH_TOKEN,ssid,pass);
  timer.setInterval(50L,sendData);
}

void loop(){
  Blynk.run();
  timer.run();
}
</span>
</code>
      </pre>

      <button id="btnCode"
        class="mt-3 text-cyan-400 hover:text-cyan-300 font-medium transition">
        Baca selengkapnya
      </button>

      <a href="https://github.com/Neuron-XIPPLGB/Lie-Detector"
         target="_blank"
         class="block mt-6 text-blue-400 hover:underline">
        Kunjungi Repositori GitHub →
      </a>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="border-t border-gray-800 py-6 text-center text-gray-500">
    © 2025 NEURON. Semua Hak Cipta Dilindungi.
  </footer>

</body>
</html>

